<?php
// 初期選択状態の取得
$dflt_mg = '';
$dflt_wd = '';
/*
if ( isset($this->list_data) && isset($this->list_data['disp_mode']) ) {
	if ($this->list_data['disp_mode'] == 'cmpn' || $this->list_data['disp_mode'] == 'fvrt') {
		$dflt_mg = $this->list_data['disp_mode'];
	} else
	if (isset($this->list_data['mgcd'])) {
		$dflt_mg = $this->list_data['mgcd'];
	}
	if (isset($this->list_data['dtl_srh_wd']) && $this->list_data['dtl_srh_wd'] != '') {
		$dflt_wd = $this->list_data['dtl_srh_wd'];
	}
}
*/
?>
<?php if($this->getSetting('fess_suggest_flg') == true){ ?>
<script src="<?php echo $this->escape($this->common_url); ?>n_js/modal.js"></script>
<script src="<?php echo $this->escape($this->common_url); ?>n_js/suggestor.js"></script>

<!-- ここからモーダルウィンドウ -->
<div id="modal-content" >
	<!-- モーダルウィンドウのコンテンツ開始 -->
	<form id="modalSearchForm" action="<?php echo $this->escape($this->top_page); ?>shop/<?php echo $this->escape($this->shop_code); ?>/item_lst.php" method="post">
		<div class="searchItemBox flex flex-row">
			<div class="block w-full mr-2">
				<span class="flex md:w-1/3 h-10 cursor-pointer border-2 border-gray-300 rounded">
					<input type="hidden" name="p_dtl_srh_mg" value=""/>
					<input type="search" name="p_dtl_srh_wd" placeholder="Search" id="p_srh_wd" 
						class="modalItemName flex-grow px-4 text-sm focus:outline-none" value="<?php echo $this->escape($dflt_wd); ?>">
					<input type="submit" name="p_dtl_srh_btn" class="submit w-8 h-8" value="" >
				</span>
			</div>
			<div class="block ml-auto mt-1">
				<a id="modal-close" class="button-link">ｷｬﾝｾﾙ</a>
			</div>
		</div>
	</form>
	<!-- モーダルウィンドウのコンテンツ終了 -->
</div>

<script>
$(function() {
	$('#p_srh_wd').suggestor({
    ajaxinfo : {
      url : '<?php echo $this->escape($this->top_page); ?>shop/<?php echo $this->escape($this->shop_code); ?>/suggest.php',
      fn : '_default,content,title',
      num : 10
    },
    boxCssInfo: {
      "background-color": "#fff",
      "z-index": "10000"
    },
    minterm: 1,
    adjustWidthVal : 11,
    searchForm : $('#modalSearchForm')
  });
});
</script>

<?php } ?>

<div id="searchItemBoxContent" class="flex w-full items-center z-20 bg-white p-3">
	<nav class="block pl-4 pt-2 justify-between top-0">
		<button id="MenuButton" class="mt-1 p-0 focus:outline-none xl:hidden" title="Open side menu">
			<!-- SVG For "x" button -->
			<svg id="MenuButtonClose" class="w-30 h-30 rounded absolute right-0 hidden mr-3 z-50 bg-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
			</svg>

			<!-- SVG For "Menu burger" button -->
			<svg id="MenuButtonOpen" class="w-25 h-25 rounded z-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
			</svg>
		</button>
		<p class="text-size10">メニュー</p>
	</nav>
	<form id="searchItemForm" class="mb-0 flex-1 mr-4" action="<?php echo $this->escape($this->top_page); ?>shop/<?php echo $this->escape($this->shop_code); ?>/item_lst.php" method="post">
		<div id="searchItem" class="searchItemBox flex flex-row items-center ml-4 bg-white">
			<div class="block w-full bd-search rounded">
				<span class="flex cursor-pointer">
					<input type="hidden" name="p_dtl_srh_mg" value=""/>
					<input type="search" name="p_dtl_srh_wd" placeholder="キーワードで検索" id="modal-open" class="flex-grow ml-2 mr-2 focus:outline-none text-size12">
					<span class="bg-search">
						<input type="submit" class="submit m-2 w-20 h-20" value="" >
					</span>
				</span>
			</div>
		</div>
	</form>
</div>
<?php $this->render('_parts/side/menuSide.html') /* サイドメニュー */ ?>
